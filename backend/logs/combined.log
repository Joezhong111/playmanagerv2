{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T06:07:06.848Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T06:07:06.849Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T06:07:06.849Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T06:07:09.465Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T12:08:52.262Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T12:08:52.264Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T12:08:52.264Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T12:08:54.631Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T12:14:02.030Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T12:14:02.032Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T12:14:02.032Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T12:14:03.506Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T13:28:23.061Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T13:28:23.063Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T13:28:23.063Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T13:28:24.663Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T14:26:44.291Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T14:26:44.293Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T14:26:44.293Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T14:26:48.734Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T14:51:47.963Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T14:51:47.965Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T14:51:47.965Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T14:51:52.523Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T14:55:51.383Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T14:55:51.384Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T14:55:51.385Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T14:55:56.391Z"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T14:56:15.233Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T14:56:15.235Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T14:56:15.235Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T14:56:19.482Z"}
{"error":"API endpoint not found not found","ip":"::ffff:127.0.0.1","level":"error","message":"Application error","method":"GET","service":"playmanager-api","stack":"AppError: API endpoint not found not found\n    at file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/server.js:85:8\n    at Layer.handle [as handle_request] (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at router.process_params (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at SendStream.error (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\serve-static\\index.js:121:7)\n    at SendStream.emit (node:events:507:28)","timestamp":"2025-08-27T14:58:03.949Z","url":"/"}
{"error":"API endpoint not found not found","ip":"::ffff:127.0.0.1","level":"error","message":"Application error","method":"GET","service":"playmanager-api","stack":"AppError: API endpoint not found not found\n    at file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/server.js:85:8\n    at Layer.handle [as handle_request] (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at router.process_params (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at SendStream.error (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\serve-static\\index.js:121:7)\n    at SendStream.emit (node:events:507:28)","timestamp":"2025-08-27T14:58:03.988Z","url":"/favicon.ico"}
{"error":"API endpoint not found not found","ip":"::1","level":"error","message":"Application error","method":"GET","service":"playmanager-api","stack":"AppError: API endpoint not found not found\n    at file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/server.js:85:8\n    at Layer.handle [as handle_request] (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at router.process_params (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at SendStream.error (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\serve-static\\index.js:121:7)\n    at SendStream.emit (node:events:507:28)","timestamp":"2025-08-27T14:58:54.447Z","url":"/api/health"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T15:00:25.171Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T15:00:25.173Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T15:00:25.173Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T15:00:28.751Z"}
{"error":"API endpoint not found not found","ip":"::ffff:127.0.0.1","level":"error","message":"Application error","method":"GET","service":"playmanager-api","stack":"AppError: API endpoint not found not found\n    at file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/server.js:85:8\n    at Layer.handle [as handle_request] (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at router.process_params (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at SendStream.error (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\serve-static\\index.js:121:7)\n    at SendStream.emit (node:events:507:28)","timestamp":"2025-08-27T15:00:47.663Z","url":"/"}
{"error":"API endpoint not found not found","ip":"::ffff:127.0.0.1","level":"error","message":"Application error","method":"GET","service":"playmanager-api","stack":"AppError: API endpoint not found not found\n    at file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/server.js:85:8\n    at Layer.handle [as handle_request] (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at router.process_params (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at SendStream.error (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\serve-static\\index.js:121:7)\n    at SendStream.emit (node:events:507:28)","timestamp":"2025-08-27T15:00:47.697Z","url":"/favicon.ico"}
{"level":"info","message":"✅ User connected: admin (dispatcher)","service":"playmanager-api","socketId":"HLXRDVZu0GBNrjglAAAB","timestamp":"2025-08-27T15:00:55.968Z","userId":60001}
{"level":"info","message":"✅ User connected: player1 (player)","service":"playmanager-api","socketId":"tNQOqrksX-AitAlXAAAD","timestamp":"2025-08-27T15:02:13.846Z","userId":60003}
{"error":"Data truncated for column '%s' at row %d","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"Error: Data truncated for column '%s' at row %d\n    at PromisePool.execute (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TaskRepository.update (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/repositories/task.repository.js:37:39)\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:282:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:02:46.730Z","url":"/api/tasks/180005/pause","user":"player1"}
{"error":"Data truncated for column '%s' at row %d","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"Error: Data truncated for column '%s' at row %d\n    at PromisePool.execute (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TaskRepository.update (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/repositories/task.repository.js:37:39)\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:282:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:03:56.121Z","url":"/api/tasks/180005/pause","user":"player1"}
{"level":"info","message":"❌ User disconnected: player1","service":"playmanager-api","timestamp":"2025-08-27T15:04:02.974Z","userId":60003}
{"error":{"code":"ER_DATA_TOO_LONG","errno":1406,"message":"Data Too Long, field len 4, data len 7","sql":"UPDATE users SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?","sqlMessage":"Data Too Long, field len 4, data len 7","sqlState":"22001"},"level":"error","message":"Error handling disconnect","service":"playmanager-api","timestamp":"2025-08-27T15:04:03.712Z","userId":60003}
{"level":"info","message":"✅ User connected: player1 (player)","service":"playmanager-api","socketId":"r6IydRpal2dk3padAAAF","timestamp":"2025-08-27T15:04:04.706Z","userId":60003}
{"error":"Data truncated for column '%s' at row %d","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"Error: Data truncated for column '%s' at row %d\n    at PromisePool.execute (D:\\Files\\Projects\\个人\\playmanagerv2\\backend\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TaskRepository.update (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/repositories/task.repository.js:37:39)\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:282:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:04:32.395Z","url":"/api/tasks/180001/pause","user":"player1"}
{"level":"info","message":"🚀 派单系统后端启动成功","service":"playmanager-api","timestamp":"2025-08-27T15:07:54.478Z"}
{"level":"info","message":"📡 服务器地址: http://localhost:3003","service":"playmanager-api","timestamp":"2025-08-27T15:07:54.480Z"}
{"level":"info","message":"🔌 WebSocket端口: 3003","service":"playmanager-api","timestamp":"2025-08-27T15:07:54.480Z"}
{"level":"info","message":"✅ 系统就绪，等待连接...","service":"playmanager-api","timestamp":"2025-08-27T15:07:58.151Z"}
{"level":"info","message":"✅ User connected: player1 (player)","service":"playmanager-api","socketId":"7idknnq_vON_XbXxAAAB","timestamp":"2025-08-27T15:07:58.595Z","userId":60003}
{"level":"info","message":"✅ User connected: admin (dispatcher)","service":"playmanager-api","socketId":"MuZatlK51tOmSXEDAAAD","timestamp":"2025-08-27T15:07:59.539Z","userId":60001}
{"level":"info","message":"❌ User disconnected: player1","service":"playmanager-api","timestamp":"2025-08-27T15:11:19.948Z","userId":60003}
{"error":{"code":"ER_DATA_TOO_LONG","errno":1406,"message":"Data Too Long, field len 4, data len 7","sql":"UPDATE users SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?","sqlMessage":"Data Too Long, field len 4, data len 7","sqlState":"22001"},"level":"error","message":"Error handling disconnect","service":"playmanager-api","timestamp":"2025-08-27T15:11:20.691Z","userId":60003}
{"level":"info","message":"✅ User connected: player1 (player)","service":"playmanager-api","socketId":"zqcN77pAuPKiyaLOAAAF","timestamp":"2025-08-27T15:11:23.517Z","userId":60003}
{"error":"Only in-progress tasks can be paused","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"AppError: Only in-progress tasks can be paused\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:279:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:11:30.099Z","url":"/api/tasks/180001/pause","user":"player1"}
{"error":"Only in-progress tasks can be paused","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"AppError: Only in-progress tasks can be paused\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:279:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:11:30.111Z","url":"/api/tasks/180001/pause","user":"player1"}
{"error":"Only in-progress tasks can be paused","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"AppError: Only in-progress tasks can be paused\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:279:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:11:30.268Z","url":"/api/tasks/180001/pause","user":"player1"}
{"error":"Only in-progress tasks can be paused","ip":"::1","level":"error","message":"Application error","method":"PUT","service":"playmanager-api","stack":"AppError: Only in-progress tasks can be paused\n    at TaskService.pauseTask (file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/services/task.service.js:279:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///D:/Files/Projects/%E4%B8%AA%E4%BA%BA/playmanagerv2/backend/controllers/task.controller.js:117:25","timestamp":"2025-08-27T15:11:33.499Z","url":"/api/tasks/180001/pause","user":"player1"}
