# æ•°æ®åº“è„šæœ¬ç®¡ç†

PlayManagerV2 æ•°æ®åº“ç»Ÿä¸€ç®¡ç†ç³»ç»Ÿ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åˆå§‹åŒ–æ•°æ®åº“
```bash
# æ–¹å¼1: ä½¿ç”¨ç»Ÿä¸€åˆå§‹åŒ–è„šæœ¬ (æ¨è)
node database-setup.js

# æ–¹å¼2: ä½¿ç”¨ç®¡ç†å·¥å…·
node db-manager.js init
```

### æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
```bash
node db-manager.js status
```

## ğŸ“ è„šæœ¬è¯´æ˜

### æ ¸å¿ƒè„šæœ¬
- **`database-setup.js`** - ç»Ÿä¸€æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
  - åˆ›å»ºæ‰€æœ‰å¿…è¦çš„è¡¨ç»“æ„
  - é…ç½®ç´¢å¼•å’Œå¤–é”®çº¦æŸ
  - åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦æˆ· (super_admin/admin123)
  - åˆå§‹åŒ–æ¸¸æˆå­—å…¸æ•°æ®
  - åˆ›å»ºå­˜å‚¨è¿‡ç¨‹å’Œå®šæ—¶ä»»åŠ¡

- **`db-manager.js`** - æ•°æ®åº“ç®¡ç†å·¥å…·
  - `init` - å®Œæ•´åˆå§‹åŒ–æ•°æ®åº“
  - `status` - æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
  - `reset` - é‡ç½®æ•°æ®åº“ï¼ˆæ¸…ç©ºæ•°æ®ï¼‰
  - `clean` - æ¸…ç†è¿‡æœŸæ•°æ®
  - `help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

### ç®¡ç†å·¥å…·è„šæœ¬
- **`check-super-admin.js`** - æ£€æŸ¥è¶…çº§ç®¡ç†å‘˜çŠ¶æ€
- **`verify-super-admin.js`** - éªŒè¯è¶…çº§ç®¡ç†å‘˜è´¦æˆ·
- **`super-admin-manager.js`** - è¶…çº§ç®¡ç†å‘˜ç®¡ç†å·¥å…·
- **`diagnose-database.js`** - æ•°æ®åº“è¯Šæ–­å·¥å…·

### é…ç½®æ–‡ä»¶
- **`config.js`** - æ•°æ®åº“é…ç½®å’Œå·¥å…·å‡½æ•°
- **`tools.js`** - é€šç”¨å·¥å…·å‡½æ•°

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

ç³»ç»ŸåŒ…å«ä»¥ä¸‹æ ¸å¿ƒè¡¨ï¼š

### ç”¨æˆ·ç›¸å…³
- `users` - ç”¨æˆ·è´¦æˆ·è¡¨
- `user_sessions` - ç”¨æˆ·ä¼šè¯ç®¡ç†
- `user_statistics` - ç”¨æˆ·ç»Ÿè®¡æ•°æ®

### ä»»åŠ¡ç›¸å…³  
- `tasks` - ä»»åŠ¡ä¸»è¡¨
- `task_logs` - ä»»åŠ¡æ“ä½œæ—¥å¿—
- `time_extension_requests` - æ—¶é—´å»¶é•¿ç”³è¯·

### ç³»ç»Ÿç›¸å…³
- `system_statistics` - ç³»ç»Ÿç»Ÿè®¡æ•°æ®
- `game_names` - æ¸¸æˆå­—å…¸

## ğŸ” é»˜è®¤è´¦æˆ·

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦æˆ·ï¼š
- **ç”¨æˆ·å**: `super_admin`
- **å¯†ç **: `admin123`
- **è§’è‰²**: `super_admin`

> âš ï¸ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯·åŠæ—¶ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### é¦–æ¬¡éƒ¨ç½²
1. ç¡®ä¿MySQL/MariaDBæœåŠ¡å·²å¯åŠ¨
2. é…ç½® `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
3. è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š`node database-setup.js`
4. éªŒè¯åˆå§‹åŒ–ç»“æœï¼š`node db-manager.js status`

### æ—¥å¸¸ç»´æŠ¤
```bash
# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
node db-manager.js status

# æ¸…ç†è¿‡æœŸæ•°æ®
node db-manager.js clean

# æ£€æŸ¥è¶…çº§ç®¡ç†å‘˜
node check-super-admin.js

# è¯Šæ–­æ•°æ®åº“é—®é¢˜
node diagnose-database.js
```

### é‡æ–°åˆå§‹åŒ–
```bash
# é‡ç½®æ•°æ®åº“ï¼ˆæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰
node db-manager.js reset

# é‡æ–°åˆå§‹åŒ–
node db-manager.js init
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- Node.js 16+
- MySQL 8.0+ æˆ– MariaDB 10.6+
- å¿…è¦çš„ npm åŒ…ï¼š`mysql2`, `bcrypt`, `dotenv`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦æ•°æ®**: åœ¨æ‰§è¡Œé‡ç½®æˆ–åˆå§‹åŒ–æ“ä½œå‰ï¼Œè¯·ç¡®ä¿å·²å¤‡ä»½é‡è¦æ•°æ®
2. **ç¯å¢ƒé…ç½®**: ç¡®ä¿ `.env` æ–‡ä»¶é…ç½®æ­£ç¡®
3. **æƒé™è®¾ç½®**: ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™æ‰§è¡ŒDDLæ“ä½œ
4. **æ—¶åŒºè®¾ç½®**: ç³»ç»Ÿä½¿ç”¨ UTC+8 æ—¶åŒºï¼Œç¡®ä¿æ•°æ®åº“æ—¶åŒºé…ç½®æ­£ç¡®

## ğŸ—‚ï¸ æ–‡ä»¶å½’æ¡£

`backup/` ç›®å½•åŒ…å«äº†æ—§ç‰ˆæœ¬çš„è„šæœ¬æ–‡ä»¶ï¼Œä»…ä½œå¤‡ä»½å‚è€ƒä½¿ç”¨ã€‚