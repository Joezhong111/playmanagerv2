# è„šæœ¬å·¥å…·ç›®å½• (Scripts & Utilities)

æœ¬ç›®å½•åŒ…å«é¡¹ç›®å¼€å‘ã€æµ‹è¯•å’Œç»´æŠ¤è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å„ç§è„šæœ¬å·¥å…·ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ test/           # æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ check-player-tasks.js      # æ£€æŸ¥é™ªç©å‘˜ä»»åŠ¡çŠ¶æ€
â”‚   â”œâ”€â”€ check-user-status.js       # æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ä¸€è‡´æ€§
â”‚   â”œâ”€â”€ create-test-task.js        # åˆ›å»ºæµ‹è¯•ä»»åŠ¡
â”‚   â”œâ”€â”€ simple-test.js             # ç®€å•åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test-backend-api.js        # åç«¯APIæµ‹è¯•
â”‚   â”œâ”€â”€ test-player-status.js      # é™ªç©å‘˜çŠ¶æ€æµ‹è¯•
â”‚   â”œâ”€â”€ test-super-admin.js       # è¶…çº§ç®¡ç†å‘˜åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test-status-stability.js   # çŠ¶æ€ç¨³å®šæ€§æµ‹è¯•
â”‚   â””â”€â”€ test-task-display-fix.js   # ä»»åŠ¡æ˜¾ç¤ºä¿®å¤éªŒè¯
â”œâ”€â”€ database/       # æ•°æ®åº“ç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ add-overtime-column.sql     # æ·»åŠ è¶…æ—¶åŠŸèƒ½åˆ—
â”‚   â”œâ”€â”€ check_player_tasks.sql      # æ£€æŸ¥é™ªç©å‘˜ä»»åŠ¡SQL
â”‚   â”œâ”€â”€ execute-db-update.js        # æ‰§è¡Œæ•°æ®åº“æ›´æ–°
â”‚   â”œâ”€â”€ init-database.js            # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ init_super_admin.sql        # è¶…çº§ç®¡ç†å‘˜åˆå§‹åŒ–
â”‚   â”œâ”€â”€ migrate.js                  # æ•°æ®åº“è¿ç§»å·¥å…·
â”‚   â”œâ”€â”€ run_queue_migration.js      # é˜Ÿåˆ—ç³»ç»Ÿè¿ç§»
â”‚   â”œâ”€â”€ update-database-schema.js   # æ›´æ–°æ•°æ®åº“æ¶æ„
â”‚   â””â”€â”€ update-schema.js            # æ›´æ–°æ¶æ„å·¥å…·
â””â”€â”€ utils/          # å®ç”¨å·¥å…·è„šæœ¬
    â”œâ”€â”€ activate-super-admin.js      # æ¿€æ´»è¶…çº§ç®¡ç†å‘˜è´¦æˆ·
    â””â”€â”€ reset-user-status.js        # é‡ç½®ç”¨æˆ·çŠ¶æ€å·¥å…·
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æµ‹è¯•è„šæœ¬ (Test Scripts)

#### æ£€æŸ¥é™ªç©å‘˜ä»»åŠ¡çŠ¶æ€
```bash
node scripts/test/check-player-tasks.js
```
- æ£€æŸ¥æŒ‡å®šé™ªç©å‘˜çš„ä»»åŠ¡åˆ†é…å’ŒçŠ¶æ€æƒ…å†µ
- éªŒè¯ä»»åŠ¡æ˜¾ç¤ºé€»è¾‘æ˜¯å¦æ­£ç¡®

#### æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ä¸€è‡´æ€§
```bash
node scripts/test/check-user-status.js
```
- éªŒè¯ç™»å½•å“åº”å’Œç”¨æˆ·è¯¦æƒ…çš„çŠ¶æ€ä¸€è‡´æ€§
- æµ‹è¯•çŠ¶æ€æ›´æ–°åŠŸèƒ½

#### åˆ›å»ºæµ‹è¯•ä»»åŠ¡
```bash
node scripts/test/create-test-task.js
```
- è‡ªåŠ¨åˆ›å»ºæµ‹è¯•ä»»åŠ¡ç”¨äºå¼€å‘è°ƒè¯•
- æ”¯æŒæŒ‡å®šæ´¾å•å‘˜å’Œé™ªç©å‘˜

#### åç«¯APIæµ‹è¯•
```bash
node scripts/test/test-backend-api.js
```
- å…¨é¢æµ‹è¯•åç«¯APIç«¯ç‚¹
- éªŒè¯å“åº”æ•°æ®ç»“æ„å’Œæƒé™æ§åˆ¶

#### è¶…çº§ç®¡ç†å‘˜åŠŸèƒ½æµ‹è¯•
```bash
node scripts/test/test-super-admin.js
```
- æµ‹è¯•è¶…çº§ç®¡ç†å‘˜çš„ç‰¹æ®Šæƒé™
- éªŒè¯ç”¨æˆ·ç®¡ç†å’Œç³»ç»Ÿç®¡ç†åŠŸèƒ½

### æ•°æ®åº“è„šæœ¬ (Database Scripts)

#### æ•°æ®åº“åˆå§‹åŒ–
```bash
node scripts/database/init-database.js
```
- åˆå§‹åŒ–æ•°æ®åº“ç»“æ„å’ŒåŸºç¡€æ•°æ®
- åˆ›å»ºå¿…è¦çš„è¡¨å’Œç´¢å¼•

#### æ¿€æ´»è¶…çº§ç®¡ç†å‘˜
```bash
node scripts/utils/activate-super-admin.js
```
- æ¿€æ´»ç³»ç»Ÿè¶…çº§ç®¡ç†å‘˜è´¦æˆ·
- è®¾ç½®é»˜è®¤ç®¡ç†å‘˜æƒé™

#### æ•°æ®åº“è¿ç§»
```bash
node scripts/database/migrate.js
```
- æ‰§è¡Œæ•°æ®åº“ç»“æ„è¿ç§»
- æ›´æ–°è¡¨ç»“æ„å’Œçº¦æŸ

#### é˜Ÿåˆ—ç³»ç»Ÿè¿ç§»
```bash
node scripts/database/run_queue_migration.js
```
- è¿è¡Œä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿè¿ç§»
- æ·»åŠ é˜Ÿåˆ—ç›¸å…³è¡¨å’Œå­—æ®µ

### å®ç”¨å·¥å…· (Utilities)

#### é‡ç½®ç”¨æˆ·çŠ¶æ€
```bash
node scripts/utils/reset-user-status.js
```
- æ‰‹åŠ¨é‡ç½®æŒ‡å®šç”¨æˆ·çš„çŠ¶æ€
- ç”¨äºè§£å†³çŠ¶æ€åŒæ­¥é—®é¢˜

#### æ¿€æ´»è¶…çº§ç®¡ç†å‘˜
```bash
node scripts/utils/activate-super-admin.js
```
- æ¿€æ´»æˆ–é‡ç½®è¶…çº§ç®¡ç†å‘˜è´¦æˆ·
- è®¾ç½®ç³»ç»Ÿç®¡ç†å‘˜æƒé™

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç”Ÿäº§ç¯å¢ƒä½¿ç”¨**: è¿™äº›è„šæœ¬ä¸»è¦ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¯·å……åˆ†æµ‹è¯•
2. **é…ç½®è¦æ±‚**: è¿è¡Œè„šæœ¬å‰ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆé»˜è®¤ç«¯å£3003ï¼‰
3. **æ•°æ®å®‰å…¨**: éƒ¨åˆ†è„šæœ¬ä¼šä¿®æ”¹æ•°æ®åº“æ•°æ®ï¼Œè¯·åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨
4. **æƒé™è¦æ±‚**: æŸäº›è„šæœ¬éœ€è¦ç®¡ç†å‘˜æƒé™æ‰èƒ½æ­£å¸¸è¿è¡Œ

## ğŸ”§ è‡ªå®šä¹‰è„šæœ¬

å¦‚éœ€æ·»åŠ æ–°çš„è„šæœ¬ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š
1. å°†è„šæœ¬æ”¾ç½®åœ¨å¯¹åº”çš„å­ç›®å½•ä¸­
2. æ·»åŠ è¯¦ç»†çš„æ³¨é‡Šå’Œä½¿ç”¨è¯´æ˜
3. åŒ…å«é€‚å½“çš„é”™è¯¯å¤„ç†
4. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œå‘½åè§„èŒƒ

## ğŸ“ ç»´æŠ¤è¯´æ˜

- å®šæœŸæ¸…ç†è¿‡æ—¶çš„æµ‹è¯•è„šæœ¬
- æ›´æ–°è„šæœ¬ä»¥é€‚é…æœ€æ–°çš„APIå˜æ›´
- ä¿æŒè„šæœ¬æ–‡æ¡£çš„åŠæ—¶æ›´æ–°